
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
      http-equiv="Content-Security-Policy"
      content="script-src 'self' 'unsafe-inline';"
    />
    <title>Bob Lambert</title>
    <link rel="stylesheet" href="../input.css" />
  <link rel="stylesheet" href="../settings.css">
  <style>
   body {
      background-color: #000; /* Dark background */
      
    }
    .stars {
      width: 1px;
      height: 1px;
      background: transparent;
      box-shadow: 0px 0px 2px 1px white, 20px 30px 2px 1px white, 40px 20px 2px 1px white, 
                  60px 50px 2px 1px white, 80px 60px 2px 1px white, 100px 70px 2px 1px white, 
                  120px 80px 2px 1px white, 140px 90px 2px 1px white, 160px 100px 2px 1px white;
      animation: twinkling 5s infinite alternate;
    }
    @keyframes twinkling {
      0% {
        transform: scale(2);
      }
      100% {
        transform: scale(1.5);
      }
    }


  </style>
  
</head>

<body>
  <main class="main">
    <header class="header">
      <p>üçÇ</p>
      <div class="switchBtns">
          
         <div style="display: flex; width: 30%; background-color: #d3dade; border-radius: 6px; align-items: center; justify-content: center;">
          <input
          type="text"
          placeholder="search his voice.."
          class="search-bar"
          id='searchBar'
        />
        <p style="cursor: pointer; padding: 0px 8px; " onclick="searchText()">üç≥</p>
         </div>
          <div class="dropdown">
            <button class="dropDownButton tracking-wide">to year ‚ñº</button>
            <div class="dropdown-content">
            <p class="gridValue" id="titleOrYear">1964</p>
            <p class="gridValue" id="titleOrYear">1965</p>
            <p class="gridValue" id="titleOrYear">1967</p>
            <p class="gridValue" id="titleOrYear">1968</p>
            <p class="gridValue" id="titleOrYear">1969</p>
            <p class="gridValue" id="titleOrYear">1970</p>
            <p class="gridValue" id="titleOrYear">1971</p>
            <p class="gridValue" id="titleOrYear">1972</p>
            <p class="gridValue" id="titleOrYear">1973</p>
            
            </div>
          </div>

          <div class="dropdown">
            <button class="dropDownButton"> to Title ‚ñº</button>
            <div class="dropdown-content">
              <p class="gridValue" id="titleOrYear">A</p>
              <p class="gridValue" id="titleOrYear">B</p>
              <p class="gridValue" id="titleOrYear">C</p>
              <p class="gridValue" id="titleOrYear">D</p>
              <p class="gridValue" id="titleOrYear">E</p>
              <p class="gridValue" id="titleOrYear">F</p>
              <p class="gridValue" id="titleOrYear">G</p>
              <p class="gridValue" id="titleOrYear">H</p>
              <p class="gridValue" id="titleOrYear">I</p>
              <p class="gridValue" id="titleOrYear">J</p>
              <p class="gridValue" id="titleOrYear">K</p>
              <p class="gridValue" id="titleOrYear">L</p>
              <p class="gridValue" id="titleOrYear">M</p>
              <p class="gridValue" id="titleOrYear">N</p>
              <p class="gridValue" id="titleOrYear">O</p>
              <p class="gridValue" id="titleOrYear">P</p>
              <p class="gridValue" id="titleOrYear">Q</p>
              <p class="gridValue" id="titleOrYear">R</p>
              <p class="gridValue" id="titleOrYear">S</p>
              <p class="gridValue" id="titleOrYear">T</p>
              <p class="gridValue" id="titleOrYear">U</p>
              <p class="gridValue" id="titleOrYear">V</p>
              <p class="gridValue" id="titleOrYear">W</p>
              <p class="gridValue" id="titleOrYear">X</p>
              <p class="gridValue" id="titleOrYear">Y</p>
              <p class="gridValue" id="titleOrYear">Z</p>
            </div> 
          </div>

         <div class="navIcons">
          <img src="../../assets/homegif.gif" alt="" style="cursor:pointer; border-radius: 50%; height: 30px; width: 30px;" id="homeBtn" title="home"/>

          <img src="../../assets/cloud.png" alt="" style="cursor: pointer; height:30px;" id="sermonBtn" title="sermons">

          <img src="../../assets/songs.png" alt="" style="cursor: pointer; height: 30px;" id='allSongBtn' title="All songs">
          <img src="../../assets/addsong.png" alt="" style="cursor: pointer; height: 30px;"  onclick="navigateTo('new-song')" title="add somg">
          <img src="../../assets/vids.png" alt="" style="cursor: pointer; height: 30px;"  id="vidBtn" title="videos">
          <img src="../../assets/settings.png" alt="" style="cursor: pointer; height: 30px;" id="settings-button" title="setting">
        
         </div>
         <div id="settings-panel" class="hidden">
          <h2 style="color: #d3dade;">Settings</h2> 
          <!-- <a href="" style="color: #d3dade; padding: 4px; background-color:blue; width: 5vw; text-decoration: none;">reset</a> -->
          <label for="bg-color">Background Color:</label>
          <input type="color" id="bg-color" name="bg-color" value="#d3dade">
          <label for="text-color">Text Color:</label>
          <input type="color" id="text-color" name="text-color">
          <label for="font-size">Font Size:</label>
          <input type="range" id="font-size" name="font-size" min="12" max="24" value="16">
          <span id="font-size-value">16px</span>
          <label for="dark-mode">Dark Mode:</label>
          <input type="checkbox" id="dark-mode" name="dark-mode">
          <button id="apply-settings" class="apply">Apply</button>
      </div>
         
        </div>
        <p>üçÇ</p>
      </header>

    <div class="flex-container">
      <aside class="sidebar" id="sidebar">
        <img src="../../assets/sidepanel.png" alt="" onclick="showSide()" style="height: 30px; cursor: pointer;">
        <div style="display: flex; align-items: center; flex-direction: column;">
          <img src="../../assets/font.png" alt="" id="viewer" style="height: 30px; cursor: pointer; margin-top: 1rem;">
          <div style="padding: 4px;" id="readSize">
            <li class="textSize">1</li>
            <li class="textSize">2</li>
            <li class="textSize">3</li>
            <li class="textSize">4</li>
            <li class="textSize">5</li>
            <li class="textSize">6</li>
          </div>
        </div>
      </aside>
      <aside class="aside" id="aside">
        <div class="navigate">
          
          <p style="display: inline-block; font-family: monospace; display: flex; align-items: center; justify-content: center; font-size: 16px; text-align:center; color: 
          #d3dade; cursor: pointer; padding: 5px; border: 1px solid #000; border-radius: 50%; width: 60px; height: 30px; text-align: center; line-height: 30px; background-color: rgba(0,0,0,0.7);" id="alphaSort">A-X</p>
           <img src="../../assets/sidepanel.png" alt="" onclick="hideSide()" style="height: 20px; cursor: pointer;" title="hide sermon list">

        </div>
        <div id="allsermons" >
         
        </div>
      </aside>
      <section class="contentSwitch" id="content" src="../../assets/images/Bro bob.jpg">
        
      </section>
    </div>
  </main>
  <script>

    let isShowingFontSizes = false
      let readSize = document.getElementById("readSize");
      let viewer = document.getElementById("viewer");  
      readSize.style.display = 'none';
      
      viewer.addEventListener('click' , () => { 
        isShowingFontSizes = !isShowingFontSizes;
      if (isShowingFontSizes) {
        readSize.style.display = "block";
      } else {
        readSize.style.display = "none";
       
      }
    })
      
    readSize.addEventListener('click' , (e) => {
      let size = e.target.innerHTML;
      document.getElementById("sermonText").style.fontSize = `${size}rem`;
    })
    
    
    const showSide = () => {
      document.getElementById("aside").style.display = "block";
      document.getElementById("sidebar").style.display = "none";
      // document.getElementById("sermonhead").style.width = "76%";
    }
    const hideSide = () => {
      document.getElementById("sidebar").style.display = "block";
      document.getElementById("aside").style.display = "none";
      
    }

    // building setting panel

    document.getElementById('settings-button').addEventListener('click', function() {
    document.getElementById('settings-panel').classList.toggle('hidden');
});

document.getElementById('apply-settings').addEventListener('click', function() {
    const bgColor = document.getElementById('bg-color').value;
    const textColor = document.getElementById('text-color').value;
    const fontSize = document.getElementById('font-size').value+'px';
    const darkMode = document.getElementById('dark-mode').checked;

    document.getElementById("sermonText").style.color = textColor
    document.getElementById("sermonText").style.backgroundColor = bgColor
    document.getElementById("sermonText").style.fontSize = fontSize
    console.log(textColor);
    console.log(fontSize);
    

    if (darkMode) {
        document.body.classList.add('dark-mode');
    } else {
        document.body.classList.remove('dark-mode');
    }

    document.getElementById('settings-panel').classList.add('hidden');
});

document.getElementById('font-size').addEventListener('input', function() {
    document.getElementById('font-size-value').textContent = this.value + 'px';
});




   
// building search functionality

    let debounceTimeout;

        function debounce(func, delay) {
            return function() {
                const context = this;
                const args = arguments;
                clearTimeout(debounceTimeout);
                debounceTimeout = setTimeout(() => func.apply(context, args), delay);
            };
        }

        const debounceSearch = debounce(searchText, 300);

        function searchText() {
            const input = document.getElementById('searchBar').value.trim().toLowerCase();
            const paragraph = document.getElementById('sermonText');
            const text = paragraph.innerText.toLowerCase();

            // Remove previous highlights
            paragraph.innerHTML = paragraph.innerText;

            if (input.length > 0) {
                const escapedInput = escapeRegExp(input);
                const regex = new RegExp(`(${escapedInput})`, 'gi');
                const matches = [...text.matchAll(regex)];

                if (matches.length > 0) {
                    let highlightedText = text.replace(regex, '<span class="highlight">$1</span>');
                    paragraph.innerHTML = highlightedText;

                    // Scroll to the first highlighted text
                    const highlightElement = document.querySelector('.highlight');
                    if (highlightElement) {
                        highlightElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    // Reset scroll position if no match is found
                    window.scrollTo(0, 0);
                }
            }
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
        }
    </script>
<script type="module" src="../../src/renderer/js/renderer.js"></script>
</body>

</html>